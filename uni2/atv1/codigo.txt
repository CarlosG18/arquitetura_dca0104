# aluno: Carlos Gabriel Medeiros da Silva
# matricula: 20200074567

.data
    # vetor v - sinais obtidos entre 0 a 9 
    v: .word 9, 5, 7, 5, 3, 4, 0, 2, 6, 4, 2, 5, 4, 1, 2, 1, 6, 2, 2, 3, 6, 3, 0, 0, 7, 8, 3, 4, 5, 4, 0, 5, 2, 9, 8, 7
    # definindo o tamanho maximo de intensidade
    LMax: .word 9
    # definido o tamanho de elementos do vetor
    TAM: .word 36
    # definindo o vetor do histograma H, alocado com 9 espaços de 4 bytes cada = 36
    H: .space 36

.text
    main:

    # inicializando o vetor H com o valor 0 para cada indicie
    
    la $s0, H # obtendo o endereço base do vetor H e colocando no registrador s0
    
    li $t0, 0 # alocando o valor 0 no registrador temporario t0
    
    la $t1, LMax # obtendo o endereço de LMax e alocando no registrador temporario t1
    lw $t2, 0($t1) # obtendo o valor do Lmax e atribuindo no registrador temporario t2                                                                                                         

    loop:
        sw $t0, 0($s0) # armazena o valor zero no endereço atual do vetor H
        addiu $s0, $s0, 4 # incremento de 4 bytes no endereço de s0, ou seja, obtendo o endereço do proximo valor de H
        addiu $t2, $t2, -1 # decrementa em 1 o valor de LMax
        bnez $t2, loop # verifica se o valor guardado em t2 é diferente de zero, se o valor for false ele irá fazer um salto para o loop, caso contrario ele continuará o fluxo do codigo
    

    # realizando os devidos incrementos no vetor do histograma H
    la $s1, v # atribuindo o endereço base de v para o registrador S0
    la $s2, LMax # obtendo o endereço de LMax e alocando no registrador temporario t3
    la $t0, TAM # obtendo o endereço de TAM e alocando no registrador temporario t4
    lw $s3, 0($t0) # obtendo o valor de TAM e alocando no registrador s3
    
    li $t2, 4 # obtendo o valor 4 e alocando no registrador temporario t2
        
    loop:
        lw $t1, 0($s1) # atribui a t1 o valor de v
        mult $t2, $t1 # faz a multiplicão de t2 e t1 para saber quantos bytes percorrer
        mflo $t0 # move o resultado da multiplicação para t0
        add $t3, $s1, $t0 # soma o endereço de s1 mais o valor armazenado no registrador t0 e atribue em t3
        lw $t4, 0($t3) # carrega em t4 o valor do endereço de t3
        addiu $t4, $t4, 1 # incrementa em 1 o valor do registrador t4
        sw $t4, 0($s0,$t3) # atualiza o valor do vetor H em seu determinado indicie
        addiu $s3, $s3 -1 # decrementa o valor de TAM
        bltz $s3, loop # verifica se o valor de TAM é menor que zero, se for maior ele desviará o fluxo para a etiqueta loop, caso contrario seguirá com o fluxo padrão do codigo


codigo correto porem sem comentarios
.data 
H: .space 40
v: .word 9, 5, 7, 5, 3, 4, 0, 2, 6, 4, 2, 5, 4, 1, 2, 1, 6, 2, 2, 3, 6, 3, 0, 0, 7, 8, 3, 4, 5, 4, 0, 5, 2, 9, 8, 7
Lmax: .word 9
TAM: .word 36

.text
  main:
    la $t0, H
    la $t1, Lmax
    lw $t2, 0($t1)
    
    loop:
      sw $zero, 0($t0)
      addiu $t0, $t0, 4
      addiu $t2, $t2, -1
      bne $t2, $zero, loop
      
    la $t5, v
    la $s1, TAM
    lw $s2, 0($s1)
    li $s3, 4
    la $t0, H
      
    loopv:
      lw $t4, 0($t5)
      mult $t4, $s3
      mflo $s4
      add $s5, $s4, $t0
      lw $t6, 0($s5)
      addiu $t6, $t6, 1
      sw $t6, 0($s5)
      addiu $t5, $t5, 4
      addiu $s2, $s2, -1
      bne $s2, $zero, loopv
      
    la $t0, H
    la $t1, Lmax
    lw $t2, 0($t1)
    
    looph:
      lw $t3, 0($t0)
      li $v0, 1
      move $a0, $t3
      syscall
      addiu $t0, $t0, 4
      addiu $t2, $t2, -1
      bne $t2, $zero, looph

    li $v0, 10
    syscall
